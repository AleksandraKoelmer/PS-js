!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){var n;function r(e){return{title:e.data.title,upvotes:e.data.ups,score:e.data.score,num_comments:e.data.num_comments,created:e.data.created,ratio:e.data.ups/e.data.num_comments}}function o(e){Date.now();return e.created,e}function u(e){return d(n.posts.sort(function(t,n){return n[e]-t[e]||n.created-t.created}))}function d(e){var t=e.map(a);return{posts:t,count:t.length}}function a(e){return{title:e.title,upvotes:e.upvotes,score:e.score,num_comments:e.num_comments,created:e.created}}function c(){document.getElementById("table").innerHTML="",document.getElementById("bestPost").innerHTML=""}function i(e){c();var t,n=document.getElementById("table"),r=document.createElement("table");r.setAttribute("id","lista"),r.appendChild(((t=document.createElement("thead")).appendChild(l("Tytuł")),t.appendChild(l("głosy +")),t.appendChild(l("punktacja")),t.appendChild(l("liczba komentarzy")),t.appendChild(l("data utworzenia")),t)),r.appendChild(function(e){var t=document.createElement("tbody");return e.posts.map(function(e){var n,r,o,u,d,a,c,i=document.createElement("row");i.appendChild(l(e.title)),i.appendChild(l(e.upvotes)),i.appendChild(l(e.score)),i.appendChild(l(e.num_comments)),i.appendChild(l((n=e.created,r=new Date(1e3*n-324e5),o=r.getFullYear(),u=r.getMonth(),d=r.getDate(),a=r.getHours(),c="0"+r.getMinutes(),a+":"+c.substr(-2)+" "+d+"."+(u+1)+"."+o))),t.appendChild(i)}),t}(e)),n.appendChild(r)}function l(e){var t=document.createElement("td");return t.innerHTML=e,t}!function(e){fetch(e).then(function(e){return e.json()}).then(function(e){return n=function(e){var t=e.data.children.map(r);return{posts:t,count:t.length}}(e)}).then(function(e){return i(e)})}("https://www.reddit.com/r/funny.json"),document.getElementById("sortByUpVotes").addEventListener("click",function(){i(u("upvotes"))}),document.getElementById("sortByNumComments").addEventListener("click",function(){i(u("num_comments"))}),document.getElementById("sortByCreated").addEventListener("click",function(){i(u("created"))}),document.getElementById("filterByDate").addEventListener("click",function(){i(d(n.posts.filter(o)))}),document.getElementById("filterByRatio").addEventListener("click",function(){var e=u("ratio").posts[0];c(),document.getElementById("bestPost").innerHTML="<h4>tytuł postu z najwyższym stosunkiem głosów dodatnich do liczby komentarzy: </h4> <p> "+e.title+"</p>"})}]);